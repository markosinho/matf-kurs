2020-12-15T20:26:03.687Z INFO [19832] Server listening on port: 3830
2020-12-15T20:26:03.957Z DEBUG [19832] Connected to database: true
2020-12-15T20:26:07.276Z INFO [19832] Create user | {"userName":"brembr","email":"test@test.com","password":"turiri","firstName":"Marko","lastName":"Stankovic","userType":"SALES"}
2020-12-15T20:26:07.279Z ERROR [19832] Fetching user failed
2020-12-15T20:26:07.385Z ERROR [19832] Failed to create user: TypeError: Cannot read property 'userService' of undefined
    at C:\Projects\node\matf-kurs-js\web-shop-mare\build\controllers\UserController.js:153:51
    at step (C:\Projects\node\matf-kurs-js\web-shop-mare\build\controllers\UserController.js:33:23)
    at Object.next (C:\Projects\node\matf-kurs-js\web-shop-mare\build\controllers\UserController.js:14:53)
    at fulfilled (C:\Projects\node\matf-kurs-js\web-shop-mare\build\controllers\UserController.js:5:58)
2020-12-15T20:27:19.176Z INFO [8984] Server listening on port: 3830
2020-12-15T20:27:19.247Z DEBUG [8984] Connected to database: true
2020-12-15T20:27:23.496Z INFO [8984] Create user | {"userName":"brembr","email":"test@test.com","password":"turiri","firstName":"Marko","lastName":"Stankovic","userType":"SALES"}
2020-12-15T20:29:05.988Z INFO [5340] Server listening on port: 3830
2020-12-15T20:29:06.069Z DEBUG [5340] Connected to database: true
2020-12-15T20:29:31.392Z INFO [5340] Confirm registration: {"userName":"brembr","registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY."}
2020-12-15T20:29:31.536Z INFO [5340] Registration confirmed for user: brembr
2020-12-15T20:29:41.662Z INFO [5340] Get user by username: {"username":"brembr"}
2020-12-15T20:30:01.788Z INFO [5340] Login user | {"userName":"brembr","password":"turiri"}
2020-12-15T20:30:01.790Z DEBUG [5340] Auth token from headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ3ZTgwYjE5N2U0YTBkYWM3NDE5ODMiLCJpYXQiOjE2MDc5ODUzNzksImV4cCI6MTYwODU5MDE3OX0.DJ2AeyWl9JXnsZVi8NFM03HutQsnvTZoLBq812xWE0c
2020-12-15T20:30:01.821Z DEBUG [5340] findById: 5fd7e80b197e4a0dac741983
2020-12-15T20:30:02.058Z DEBUG [5340] fetched user: {"_id":"5fd7e80b197e4a0dac741983","email":"test@test.com","userName":"retro","password":"$2b$08$ryCEEseD6tR3XtLsEM7kKORHznS/Dt2mAuyYWkNsXHmn0NqE4Bbji","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$0lLrVxohPuLK7LQOPW/md.iVxXR8IbIb05WtEP4mPMF.cwXGU8wNu","userType":"SALES"}
2020-12-15T20:32:04.849Z INFO [5340] Login user | {"userName":"brembr","password":"turiri"}
2020-12-15T20:32:04.930Z INFO [5340] User logged in | username: brembr
2020-12-15T20:32:22.692Z INFO [5340] Login user | {"userName":"brembr","password":"turiri"}
2020-12-15T20:32:22.694Z DEBUG [5340] Auth token from headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjQzMjQsImV4cCI6MTYwODY2OTEyNH0.LHWEGp0TLiX2hq_vzgMa8M6b7O7fHSyk9aH8ewvgMJM
2020-12-15T20:32:22.743Z DEBUG [5340] findById: 5fd91c2ba2f6d32318384467
2020-12-15T20:32:22.806Z DEBUG [5340] fetched user: {"_id":"5fd91c2ba2f6d32318384467","email":"test@test.com","userName":"brembr","password":"$2b$08$BYlvWIKSY0VHMm4MYnROT.VDMIhLlteYWVdikhdITfUXQswPdE5WW","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY.","userType":"SALES"}
2020-12-15T20:36:49.312Z INFO [14036] Server listening on port: 3830
2020-12-15T20:36:49.369Z DEBUG [14036] Connected to database: true
2020-12-15T20:40:01.762Z INFO [684] Server listening on port: 3830
2020-12-15T20:40:01.817Z DEBUG [684] Connected to database: true
2020-12-15T20:41:01.607Z INFO [3604] Server listening on port: 3830
2020-12-15T20:41:01.813Z DEBUG [3604] Connected to database: true
2020-12-15T20:41:09.170Z INFO [9440] Server listening on port: 3830
2020-12-15T20:41:09.229Z DEBUG [9440] Connected to database: true
2020-12-15T20:42:13.827Z INFO [5144] Server listening on port: 3830
2020-12-15T20:42:13.896Z DEBUG [5144] Connected to database: true
2020-12-15T20:43:04.063Z INFO [17040] Server listening on port: 3830
2020-12-15T20:43:04.199Z DEBUG [17040] Connected to database: true
2020-12-15T20:43:20.391Z INFO [12188] Server listening on port: 3830
2020-12-15T20:43:20.497Z DEBUG [12188] Connected to database: true
2020-12-15T20:43:23.146Z INFO [12188] Login user | {"userName":"brembr","password":"turiri"}
2020-12-15T20:43:23.168Z DEBUG [12188] Auth token from headers: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjQzMjQsImV4cCI6MTYwODY2OTEyNH0.LHWEGp0TLiX2hq_vzgMa8M6b7O7fHSyk9aH8ewvgMJM
2020-12-15T20:43:23.178Z DEBUG [12188] findById: 5fd91c2ba2f6d32318384467
2020-12-15T20:43:23.289Z DEBUG [12188] fetched user: {"_id":"5fd91c2ba2f6d32318384467","email":"test@test.com","userName":"brembr","password":"$2b$08$BYlvWIKSY0VHMm4MYnROT.VDMIhLlteYWVdikhdITfUXQswPdE5WW","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY.","userType":"SALES"}
2020-12-15T20:50:56.819Z INFO [2732] Server listening on port: 3830
2020-12-15T20:50:56.953Z DEBUG [2732] Connected to database: true
2020-12-15T20:58:43.698Z INFO [20780] Server listening on port: 3830
2020-12-15T20:58:43.757Z DEBUG [20780] Connected to database: true
2020-12-15T20:58:57.826Z INFO [15540] Server listening on port: 3830
2020-12-15T20:58:57.900Z DEBUG [15540] Connected to database: true
2020-12-15T21:00:02.352Z INFO [22824] Server listening on port: 3830
2020-12-15T21:00:02.408Z DEBUG [22824] Connected to database: true
2020-12-15T21:02:59.590Z INFO [16768] Server listening on port: 3830
2020-12-15T21:02:59.651Z DEBUG [16768] Connected to database: true
2020-12-15T21:03:04.897Z INFO [19000] Server listening on port: 3830
2020-12-15T21:03:05.008Z DEBUG [19000] Connected to database: true
2020-12-15T21:05:01.674Z INFO [19304] Server listening on port: 3830
2020-12-15T21:05:01.737Z DEBUG [19304] Connected to database: true
2020-12-15T21:05:26.385Z INFO [7216] Server listening on port: 3830
2020-12-15T21:05:26.476Z DEBUG [7216] Connected to database: true
2020-12-15T21:06:40.520Z INFO [14636] Server listening on port: 3830
2020-12-15T21:06:40.575Z DEBUG [14636] Connected to database: true
2020-12-15T21:06:45.285Z INFO [4844] Server listening on port: 3830
2020-12-15T21:06:45.350Z DEBUG [4844] Connected to database: true
2020-12-15T21:06:46.478Z INFO [4844] Unauthorized request atempt from ::1
2020-12-15T21:07:46.798Z INFO [17624] Server listening on port: 3830
2020-12-15T21:07:46.891Z DEBUG [17624] Connected to database: true
2020-12-15T21:07:48.679Z INFO [17624] Unauthorized request atempt from ::1
2020-12-15T21:08:19.375Z INFO [17624] Login user | {"userName":"brembr","password":"turiri"}
2020-12-15T21:08:19.429Z INFO [17624] User logged in | username: brembr
2020-12-15T21:08:32.598Z ERROR [17624] Authentication failed: TypeError: Cannot read property 'userService' of undefined
    at C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:66:51
    at step (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:33:23)
    at Object.next (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:14:53)
    at C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:8:71
    at new Promise (<anonymous>)
    at __awaiter (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:4:12)
    at Authenticate.authenticate (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:51:16)
    at Layer.handle [as handle_request] (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\express\lib\router\route.js:137:13)
    at Route.dispatch (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\express\lib\router\route.js:112:3)
2020-12-15T21:09:38.693Z INFO [20660] Server listening on port: 3830
2020-12-15T21:09:38.751Z DEBUG [20660] Connected to database: true
2020-12-15T21:09:42.848Z DEBUG [20660] findById: 5fd91c2ba2f6d32318384467
2020-12-15T21:09:42.885Z DEBUG [20660] fetched user: {"_id":"5fd91c2ba2f6d32318384467","email":"test@test.com","userName":"brembr","password":"$2b$08$BYlvWIKSY0VHMm4MYnROT.VDMIhLlteYWVdikhdITfUXQswPdE5WW","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY.","userType":"SALES"}
2020-12-15T21:09:42.890Z DEBUG [20660] Authentication succcessful with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:09:42.895Z INFO [20660] Get user by username: {"username":"brembr"}
2020-12-15T21:09:49.158Z ERROR [20660] Authentication failed: SyntaxError: Unexpected token  in JSON at position 27
    at JSON.parse (<anonymous>)
    at Object.jwsDecode [as decode] (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\jws\lib\verify-stream.js:71:20)
    at module.exports (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\jsonwebtoken\decode.js:5:21)
    at Object.module.exports [as verify] (C:\Projects\node\matf-kurs-js\web-shop-mare\node_modules\jsonwebtoken\verify.js:69:20)
    at Authenticate.<anonymous> (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:65:58)
    at step (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:33:23)
    at Object.next (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:14:53)
    at C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:8:71
    at new Promise (<anonymous>)
    at __awaiter (C:\Projects\node\matf-kurs-js\web-shop-mare\build\middleware\Authenticate.js:4:12)
2020-12-15T21:10:00.755Z DEBUG [20660] findById: 5fd91c2ba2f6d32318384467
2020-12-15T21:10:00.778Z DEBUG [20660] fetched user: {"_id":"5fd91c2ba2f6d32318384467","email":"test@test.com","userName":"brembr","password":"$2b$08$BYlvWIKSY0VHMm4MYnROT.VDMIhLlteYWVdikhdITfUXQswPdE5WW","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY.","userType":"SALES"}
2020-12-15T21:10:00.795Z DEBUG [20660] Authentication succcessful with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:10:00.796Z INFO [20660] Get user by username: {"username":"brembr"}
2020-12-15T21:10:40.631Z INFO [10304] Server listening on port: 3830
2020-12-15T21:10:40.720Z DEBUG [10304] Connected to database: true
2020-12-15T21:10:47.939Z DEBUG [10304] Authentication with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:10:47.946Z DEBUG [10304] findById: 5fd91c2ba2f6d32318384467
2020-12-15T21:10:47.985Z DEBUG [10304] fetched user: {"_id":"5fd91c2ba2f6d32318384467","email":"test@test.com","userName":"brembr","password":"$2b$08$BYlvWIKSY0VHMm4MYnROT.VDMIhLlteYWVdikhdITfUXQswPdE5WW","firstName":"Marko","lastName":"Stankovic","registrationConfirmed":true,"registrationToken":"$2b$08$iopqdpERazLHUixjgdcOj.IwKqte5VFbAOw4wVNK1vW3PFWgauIY.","userType":"SALES"}
2020-12-15T21:10:48.000Z INFO [10304] Get user by username: {"username":"brembr"}
2020-12-15T21:11:17.053Z INFO [21136] Server listening on port: 3830
2020-12-15T21:11:17.207Z DEBUG [21136] Connected to database: true
2020-12-15T21:11:18.947Z DEBUG [21136] Authentication with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:11:18.997Z INFO [21136] Get user by username: {"username":"brembr"}
2020-12-15T21:12:17.139Z INFO [4128] Server listening on port: 3830
2020-12-15T21:12:17.197Z DEBUG [4128] Connected to database: true
2020-12-15T21:12:20.551Z DEBUG [4128] Authentication with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:12:20.577Z INFO [4128] Get user by username: {"username":"brembr"}
2020-12-15T21:12:31.181Z DEBUG [4128] Authentication with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ5MWMyYmEyZjZkMzIzMTgzODQ0NjciLCJpYXQiOjE2MDgwNjY0OTksImV4cCI6MTYwODY3MTI5OX0.ukXm9VER_0pjT_t9zIvNSHT1c8fZeCMcPqXAqj0NhpE
2020-12-15T21:12:31.196Z INFO [4128] Get user by username: {"username":"brembr"}
2020-12-15T21:13:18.470Z INFO [13824] Server listening on port: 3830
2020-12-15T21:13:18.531Z DEBUG [13824] Connected to database: true
2020-12-15T21:13:30.457Z INFO [19324] Server listening on port: 3830
2020-12-15T21:13:30.537Z DEBUG [19324] Connected to database: true
2020-12-15T21:13:34.028Z INFO [20576] Server listening on port: 3830
2020-12-15T21:13:34.087Z DEBUG [20576] Connected to database: true
2020-12-15T21:13:51.097Z INFO [22996] Server listening on port: 3830
2020-12-15T21:13:51.155Z DEBUG [22996] Connected to database: true
2020-12-15T21:14:23.188Z INFO [3616] Server listening on port: 3830
2020-12-15T21:14:23.260Z DEBUG [3616] Connected to database: true
2020-12-15T21:14:51.310Z INFO [9084] Server listening on port: 3830
2020-12-15T21:14:51.411Z DEBUG [9084] Connected to database: true
2020-12-15T21:15:13.013Z INFO [9084] Login user | {"userName":"retro","password":"ensalatasrn"}
2020-12-15T21:15:13.057Z INFO [9084] User logged in | username: retro
2020-12-15T21:15:24.625Z DEBUG [9084] Authentication with token: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmQ3ZTgwYjE5N2U0YTBkYWM3NDE5ODMiLCJpYXQiOjE2MDgwNjY5MTMsImV4cCI6MTYwODY3MTcxM30.4700aSH1y7hfdmgtx0Ssho7Rntoe6be683eM2oigeYo
2020-12-15T21:15:24.651Z INFO [9084] Get me request
2020-12-15T21:16:17.091Z INFO [7236] Server listening on port: 3830
2020-12-15T21:16:17.154Z DEBUG [7236] Connected to database: true
